CREATE TABLE CARS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    MODEL VARCHAR(50) NOT NULL,
    MANUFACTURER VARCHAR(50) NOT NULL,
    MODEL_YEAR VARCHAR(10) NOT NULL,
    FIPE_VALUE FLOAT,
    PRIMARY KEY (ID)
);


CREATE TABLE DRIVERS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    DOCUMENT VARCHAR,
    BIRTHDATE DATE,
    PRIMARY KEY (ID)
);

CREATE TABLE CAR_DRIVERS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CAR_ID BIGINT NOT NULL,
    DRIVER_ID BIGINT NOT NULL,
    IS_MAIN_DRIVER BOOLEAN NOT NULL,
    FOREIGN KEY (CAR_ID)
        REFERENCES CARS (ID),
    FOREIGN KEY (DRIVER_ID)
        REFERENCES DRIVERS (ID),
    PRIMARY KEY (ID)
);

CREATE TABLE CUSTOMER
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR(50) NOT NULL,
    DRIVER_ID BIGINT NOT NULL,
    FOREIGN KEY (DRIVER_ID)
        REFERENCES DRIVERS (ID),
    PRIMARY KEY (ID)
);

CREATE TABLE INSURANCE
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CUSTOMER_ID BIGINT NOT NULL,
    CAR_ID BIGINT NOT NULL,
    CREATION_DT DATETIME NOT NULL,
    UPDATED_DT DATETIME NOT NULL,
    IS_ACTIVE BOOLEAN NOT NULL,
    FOREIGN KEY (CUSTOMER_ID)
        REFERENCES CUSTOMER (ID),
    FOREIGN KEY (CAR_ID)
        REFERENCES CARS (ID),
    PRIMARY KEY (ID)
);

CREATE TABLE CLAIMS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CAR_ID BIGINT NOT NULL,
    DRIVER_ID BIGINT NOT NULL,
    EVENT_DATE DATE,
    FOREIGN KEY (CAR_ID)
        REFERENCES CARS (ID),
    FOREIGN KEY (DRIVER_ID)
        REFERENCES DRIVERS (ID),
    PRIMARY KEY (ID)
);
